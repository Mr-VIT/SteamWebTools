// ==UserScript==
// @name		Steam Web Tools
// @namespace	http://v1t.su/projects/steam/webtools/
// @description	Useful tools in Steam web sites
// @author		Mr-VIT
// @homepage	http://v1t.su/projects/steam/webtools/
// @icon		http://mr-vit.github.io/SteamWebTools/icon-64.png
// @run-at		document-end
// @include		http://store.steampowered.com/*
// @include		https://store.steampowered.com/*
// @include		http://steamcommunity.com/*
// @include		https://steamcommunity.com/*
// @connect		checkrep.ru
// @connect		store.steampowered.com
// @version		0.6
// @date		2016-04-20
// @updateURL	https://raw.githubusercontent.com/Mr-VIT/SteamWebTools/master/release/version.tm.js
// @grant		GM_xmlhttpRequest
// @grant		GM_xhr
// @grant		GM_getValue
// @grant		GM_setValue
// @grant		GM_deleteValue
// ==/UserScript==

!function(){function a(b){return a.text[b]||b}function b(){c.$J(window).scrollTop()>g?(c.$J("#global_header").addClass("swtfixed"),c.$J(".responsive_page_template_content").addClass("swtfixed")):(c.$J("#global_header").removeClass("swtfixed"),c.$J(".responsive_page_template_content").removeClass("swtfixed"))}var c=window.unsafeWindow||window,d={defaults:{version:1,globalLang:"en",globalFixNavbar:!0,globalHideAccName:!0,globalHideWalletBalance:!0,storeShowCCbtn:!0,storeCCList:"ru ua us ar fr no gb au br de jp",storeShowCartBtn:!0,storeCartAjax:!0,storeShowSubid:!0,storeShowBtnGetPrices:!0,marketMainPageFuncs:!0},cur:{},storage:{key:"SWTSettings",gm:!!window.GM_getValue,set:function(a){this.gm?GM_setValue(this.key,a):c.localStorage.setItem(this.key,a)},get:function(){return this.gm?GM_getValue(this.key):c.localStorage.getItem(this.key)},del:function(){this.gm?GM_deleteValue(this.key):c.localStorage.removeItem(this.key)}},load:function(){this.cur=c.$J.extend({},this.defaults);var a=this.storage.get(this.storage.key);a?c.$J.extend(this.cur,JSON.parse(a)):(this.save(),c.$J("#global_header .menuitem.supernav:nth(1)").css("outline","#48DA48 3px solid"),setTimeout(function(){c.$J("#global_header .menuitem.supernav:nth(1)").trigger("mouseover")},1e3),setTimeout(function(){c.$J("#global_header .submenu_community .submenuitem.swt").css("outline","#48DA48 3px solid")},2e3))},save:function(){this.cur&&this.storage.set(JSON.stringify(this.cur))},reset:function(){this.storage.del(),this.cur=this.defaults}};if(d.load(),c.swt_settings=d,a.loadText=function(a){this.text?a["lang.code"]==d.cur.globalLang&&c.$J.extend(this.text,a):this.text=a},a.loadText({"lang.current":"English","lang.code":"en",getMoreInfo:"Get more Info",extInfo:"Extended Info",reqErr:"Request Error",checkin:"Check in",searchinforums:"Search in forums",inventory:"Inventory",profile:"Profile",trades:"Trades",chat:"Chat",more:"More",showDropsCard:"Show only with cards drops remaining",howmany:"How many? of ",save:"Save",get:"Get",checkForSend:"Check for send",sendChecked:"Send checked",showNote:"Show Note",minMarketPrice:"Min. Market price",hideDup:"Hide duplicates, show amount",go:"Go",checkAll:"Check all",deleteChecked:"Delete checked",addSubidsToCart:"Add SubIDs to cart",add:"Add",addChecked:"Add checked",cartHist:"Cart history",clearCart:"Clear cart",quickPurchase:"One-Click Buy to inventory (SteamWallet only)",giftForSend:"Gifts for send",giftForSendNote:"If you want to send Gifts to different Emails enter them below one per line. Gifts will be sent on the order. If quantity of gifts greater than address the remaining Gifts will be sent to the last address",sent:"Sent",def:"Default",getPrices:"Get prices for other countries",prices:"Prices for other countries",viewin:"View in",searchin:"Search in",viewMyCardsGame:"View my cards/badge this game",adding:"adding",added:"Added | View in cart",allSpecials:"All Specials",balance:"Balance",acc:"Account",acceptAllToInv:"Accept all to inventory",listed:"Listed: ",skipped:"Skipped: ",skipSent:"Skip gifts sent before?",totop:"To top","set.ext":"extension","set.settings":"Settings","set.homePage":"Home Page","set.global":"Global","set.lang":"Language","set.hideAccName":"Hide Account name. It will be displayed in the tooltip when you hover.","set.hideBalance":"Hide Wallet Balance. It will be displayed in the tooltip when you hover.","set.store":"Store","set.showCCBtn":"Show button change country","set.CCList":"Your list of countries. Enter your country first","set.showCartBtn":"Always show Cart button","set.cartAjax":"Adding to cart without reloading the page","set.showSubid":"Show SubID","set.showBtnGetPrices":'Show button "Get prices for other countries"',"set.def":"Restore the default","set.market":"Community Market","set.marketMainPageFuncs":"Enable functions in main page of Community Market","set.FixNavbar":"Fix Navbar","rep.unk":"unknown","rep.mdlman":"middleman","rep.white":"whitelisted","rep.black":"blacklisted","rep.orange":"suspicious"}),a.loadText({"lang.current":"Русский","lang.code":"ru",getMoreInfo:"Получить больше Информации",extInfo:"Расширенная Информация",reqErr:"Ошибка при получении данных",checkin:"Проверить на",searchinforums:"Искать на форумах",inventory:"Инвентарь",profile:"Профиль",trades:"Трэйды",chat:"Чат",more:"Ещё",showDropsCard:"Показать с невыпавшими картами",howmany:"Сколько выбрать? из ",save:"Сохранить",get:"Получить",checkForSend:"Выбрать для отправки",sendChecked:"Отправить выбранные",showNote:"Посмотреть заметку",minMarketPrice:"Мин цена на маркете",hideDup:"Прятать дубликаты, показывая кол-во",go:"Перейти",checkAll:"Выбрать все",deleteChecked:"Удалить выбранные",addSubidsToCart:"Добавить SubID'ы в корзину",add:"Добавить",addChecked:"Добавить выбранные",cartHist:"История корзины",clearCart:"Очистить Корзину",quickPurchase:"Купить в инвентарь за один клик (только со Steam Кошелека)",giftForSend:"Гифты для отправки",giftForSendNote:"Если хотите отправить гифты на разные Email введите их ниже по одному на строку. Гифты будут отправленны по порядку. Если гифтов больше чем адресов, оставшиеся гифты будут отправлены на последний адрес",sent:"Отправлен",def:"По умолчанию",getPrices:"Получить цены для других стран",prices:"Цены для других стран",viewin:"Посмотреть на",searchin:"Искать на",viewMyCardsGame:"Посмотреть мои карты/значек этой игры",adding:"добавление",added:"Добавлено | Корзина",allSpecials:"Все спец. предложения",balance:"Баланс",acc:"Аккаунт",acceptAllToInv:"Принять все в инвентарь",listed:"Выставлено: ",skipped:"Пропущено: ",skipSent:"Пропустить отправленные ранее?",totop:"Наверх","set.ext":"расширение","set.settings":"Настройки","set.homePage":"Домашняя страница","set.global":"Глобальные","set.lang":"Язык","set.hideAccName":"Скрывать имя аккаунта. Будет показываться в подсказке при наведении","set.hideBalance":"Скрывать баланс кошелька. Будет показываться в подсказке при наведении","set.store":"Магазин","set.showCCBtn":"Показывать кнопку переключения страны","set.CCList":"Ваш список стран. Вашу страну укажите первой","set.showCartBtn":"Показывать кнопку корзины, даже если она пуста","set.cartAjax":"Добавлять в корзину без перезагрузки страницы","set.showSubid":"Отображать номер подписки","set.showBtnGetPrices":"Показывать кнопку получения цен для других стран","set.def":"Восстановить по умолчанию","set.market":"Торговая Площадка","set.marketMainPageFuncs":"Включить надстройку на главной странице торговой площадки","set.FixNavbar":"Зафиксировать Меню Навигации","rep.unk":"неизвестен","rep.mdlman":"гарант","rep.white":"в белом списке","rep.black":"в черном списке","rep.orange":"подозрительный"}),a.loadText({"lang.current":"简体中文","lang.code":"zh-cn",getMoreInfo:"获取更多信息",extInfo:"详细信息",reqErr:"请求失败",checkin:"查询声誉",searchinforums:"搜索论坛",inventory:"查询库存",profile:"查询资料",trades:"查询交易",chat:"聊天",more:"更多",showDropsCard:"只查看可掉卡游戏",howmany:"多少个? 总共 ",save:"保存",get:"获取",checkForSend:"选中",sendChecked:"发送所选",showNote:"显示备忘",minMarketPrice:"最低市场价格",hideDup:"合并重复项并显示数量",go:"跳转",checkAll:"全选",deleteChecked:"删除选中",addSubidsToCart:"添加 SubIDs 到购物车",add:"添加",addChecked:"添加选中",cartHist:"购物车历史记录",clearCart:"清空购物车",quickPurchase:"一键购买到库存 (只支持 Steam 钱包)",giftForSend:"准备发送的礼物",giftForSendNote:"如果想给不同的 Email 地址发送礼物,请在下框中每行填写一个 Email. 礼物将按顺序发送. 如果礼物数量大于 Email 地址数, 余下的礼物将被全部发送到最后一个地址.",sent:"已发送",def:"默认",getPrices:"获取其他地区的价格",prices:"其他地区价格",viewin:"查询",searchin:"搜索",viewMyCardsGame:"查看该游戏的卡片/徽章",adding:"正在添加",added:"已添加 | 在购物车中查看",allSpecials:"所有促销",balance:"余额",acc:"账户",acceptAllToInv:"接受全部并加入库存","set.ext":"扩展","set.settings":"设置","set.homePage":"主页","set.global":"全局","set.lang":"语言","set.hideAccName":"隐藏帐号. 鼠标停留在[帐号]上时显示.","set.hideBalance":"隐藏余额. 鼠标停留在[余额]上时显示.","set.store":"商店","set.showCCBtn":"显示区域切换按钮(需要登出)","set.CCList":"区域列表. 将主区域放在第一位.","set.showCartBtn":"总是显示购物车按钮","set.cartAjax":"添加到购物车时不重新加载页面","set.showSubid":"显示 SubID","set.showBtnGetPrices":'显示 "获取其他地区的价格" 按钮(需要登出)',"set.def":"恢复默认"}),a.loadText({"lang.current":"日本語","lang.code":"jp",getMoreInfo:"詳細",extInfo:"拡張機能について",reqErr:"リクエストエラー",checkin:"チェックイン",searchinforums:"フォーラムで探す",inventory:"インベントリ",profile:"プロフィール",trades:"トレード",chat:"チャット",more:"詳細",showDropsCard:"Show only with cards drops remaining",howmany:"How many? of ",save:"セーブ",get:"Get",checkForSend:"選択して送信",sendChecked:"選択したものを送信する",showNote:"メモを見る",minMarketPrice:"Min. Market price",hideDup:"Hide duplicates, show amount",go:"Go",checkAll:"すべて選択",deleteChecked:"選択を解除",addSubidsToCart:"Add SubIDs to cart",add:"Add",addChecked:"Add checked",cartHist:"Cart history",clearCart:"カートをリセットする",quickPurchase:"One-Click Buy to inventory (SteamWallet only)",giftForSend:"Gifts for send",giftForSendNote:"If you want to send Gifts to different Emails enter them below one per line. Gifts will be sent on the order. If quantity of gifts greater than address the remaining Gifts will be sent to the last address",sent:"送信完了",def:"Default",getPrices:"国ごとの価格を表示",prices:"国ごとの価格",viewin:"View in",searchin:"Search in",viewMyCardsGame:"View my cards/badge this game",adding:"adding",added:"Added | View in cart",allSpecials:"All Specials",balance:"Balance",acc:"Account",acceptAllToInv:"Accept all to inventory",listed:"Listed: ",skipped:"Skipped: ",skipSent:"Skip gifts sent before?",totop:"To top","set.ext":"拡張機能","set.settings":"設定","set.homePage":"ホームページ","set.global":"グローバル","set.lang":"言語","set.hideAccName":"アカウント名を非表示にする","set.hideBalance":"残高を非表示にする","set.store":"ストア","set.showCCBtn":"Show button change country","set.CCList":"Your list of countries. Enter your country first","set.showCartBtn":"Always show Cart button","set.cartAjax":"Adding to cart without reloading the page","set.showSubid":"SubIDを表示","set.showBtnGetPrices":'"国ごとの価格を表示"ボタンを表示する',"set.def":"Restore the default","set.market":"マーケット","set.marketMainPageFuncs":"Enable functions in main page of Community Market","set.FixNavbar":"Fix Navbar","rep.unk":"unknown","rep.mdlman":"middleman","rep.white":"whitelisted","rep.black":"blacklisted","rep.orange":"suspicious"}),c.$J(".submenu_community").append('<a class="submenuitem swt" href="http://steamcommunity.com/groups/SteamClientBeta#swt-settings">SWT - '+a("set.settings")+"</a>"),d.cur.globalHideAccName){var e=c.$J("#account_pulldown")[0];e&&(e.title=e.innerHTML,e.innerHTML="["+a("acc")+"]")}if(d.cur.globalFixNavbar){c.$J("head").append("<style>#global_header.swtfixed{position:fixed;z-index:9999;width:100%}.responsive_page_template_content.swtfixed{padding-top:50px}#global_header.swtfixed>.content{height:50px !important}#global_header.swtfixed div.logo{display:none}#global_header.swtfixed .menuitem{padding-top:15px !important}#global_header.swtfixed .supernav_container{left:0 !important}#global_header.swtfixed .header_installsteam_btn{display:none}.swtup{display:none}#global_header.swtfixed .swtup{display:block;float:left}</style>");var f=c.$J("#global_header");if(f.length){f.prepend('<a class="swtup" href="#"><span class="btn_grey_white_innerfade btn_medium_wide"><span>'+a("totop")+"</span></span></a>");var g=f.offset().top;c.document.onscroll=b}}for(var h="https?://store\\.steampowered\\.com/",i="https?://steamcommunity\\.com/",j=[{match:[h+"cart.*"],run:function(){function b(b,d){for(var e,f="<h2>"+b+'</h2><div class="block"><div class="block_content">',g=0;g<d.length;g++)e=d[g],f+='<a class="btn_small btnv6_blue_hoverfade" href="'+e.href+'"'+(e.blank?' target="_blank"':"")+"><span>"+e.text+"</span></a><br/>";f+="<br/><h2>"+a("addSubidsToCart")+'</h2> <form id="addtocartsubids" method="post"><input type="hidden" name="sessionid" value="'+c.g_sessionID+'"><input type="hidden" name="action" value="add_to_cart"><input type="text" name="subids" placeholder="1, 2, 3"/><input type="submit" value="'+a("add")+'" class="btn_small btnv6_blue_hoverfade"></form><br><form id="formcarthist" method="post"><input type="submit" value="'+a("addChecked")+'" style="float:right" class="btn_small btnv6_blue_hoverfade"><h2>'+a("cartHist")+'</h2><input type="hidden" name="sessionid" value="'+c.g_sessionID+'"><input type="hidden" name="action" value="add_to_cart">';for(var h=c.localStorage.swtcarthistory&&JSON.parse(c.localStorage.swtcarthistory)||[],i="",g=0;g<h.length;g++)i='<input type="checkbox" name="subid[]" value="'+h[g].subid+'">  <a href="/'+(h[g].link||"sub/"+h[g].subid)+'/">'+(h[g].name||"SubID: "+h[g].subid)+'</a><br>[<a href="/sub/'+h[g].subid+'/">'+h[g].subid+"</a>] ("+(h[g].price||"N/A")+")<br><br>"+i;return f+=i+"</form></div></div>"}var d=c.$J,e=document.querySelector(".page_content > .rightcol"),f=new Date;f.setTime(f.getTime()-1),links=[{href:"javascript:document.cookie='shoppingCartGID=; path=/; expires="+f.toGMTString()+"'; location.href='/cart/';",text:a("clearCart")},{href:"https://store.steampowered.com/checkout/?purchasetype=gift#quick",blank:1,text:a("quickPurchase")}],e.insertAdjacentHTML("afterBegin",b("Steam Web Tools",links)),d("#addtocartsubids").bind("submit",function(){var a,b=d(this),e=b.find('input[name="subids"]').val(),f=c.localStorage.swtcarthistory&&JSON.parse(c.localStorage.swtcarthistory)||[];e=e.split(",");for(var g=0;g<e.length;g++)a=e[g].trim(),b.append('<input type="hidden" name="subid[]" value="'+a+'"/>'),f.push({subid:a});for(;f.length>20;)f.shift();c.localStorage.swtcarthistory=JSON.stringify(f)})}},{match:[h+"checkout/\\?purchasetype=.+"],run:function(){c.$("accept_ssa").checked=!0,c.$("send_self")&&(c.$("send_self").checked=!0,c.$("send_self").onchange())}},{match:[h+"checkout/\\?purchasetype=gift.*"],run:function(){if("#quick"==c.location.hash){var a=c.FinalizeTransaction;c.FinalizeTransaction=function(){return c.$("accept_ssa").checked=!0,a.apply(this,arguments)};var b=c.OnGetFinalPriceSuccess;c.OnGetFinalPriceSuccess=function(){var a=b.apply(this,arguments);return c.FinalizeTransaction(),a},c.InitializeTransaction()}}},{match:[h+"checkout/sendgift/.*",h+"checkout/\\?purchasetype=gift.*"],run:function(){var b=document.querySelectorAll(".friend_block.disabled");if(b){for(var d=document.querySelectorAll(".friend_block_radio input[disabled]"),e=0;e<b.length;e++)b[e].removeClassName("disabled"),d[e].disabled=!1;if(c.location.hash&&"multisend"==c.location.hash.substr(1,9)){var f=c.location.hash.substr(11,c.location.hash.lenght);f=JSON.parse(decodeURIComponent(f));var g=document.querySelector(".checkout_tab"),h=[],i=[],j="",e=0;for(var k in f)h.push(k),i.push(f[k]),j+="<p>"+f[k]+' <span id="giftN'+e+'"></span></p>',e++;g.innerHTML="<p><b>"+a("giftForSend")+": "+h.length+"</b></p>"+j,c.$("email_input").insertAdjacentHTML("afterEnd","<br/><br/>"+a("giftForSendNote")+'<br/><textarea id="emails" rows=3></textarea>');var l=0,m=[];c.g_gidGift=h[0];var n=c.SubmitGiftDeliveryForm;c.SubmitGiftDeliveryForm=function(){return c.$("send_via_email").checked&&c.$("emails").value?(m=c.$("emails").value.split(/\r?\n/),m.length&&(c.$("email_input").value="noreply@steampowered.com"),n.apply(this,arguments)):n.apply(this,arguments)};var o=c.SubmitGiftNoteForm;c.SubmitGiftNoteForm=function(){return m.length&&(c.$("email_input").value=m[0]),o.apply(this,arguments)};var p=c.OnSendGiftSuccess;c.OnSendGiftSuccess=function(){c.$("giftN"+l).innerHTML="- "+a("sent"),(c.g_gidGift=h[++l])?(m.length>1&&(c.$("email_input").value=m[Math.min(l,m.length-1)]),c.SendGift()):p.apply(this,arguments)}}}}},{match:[h+".*"],run:function(){function b(){if(0===c.location.pathname.indexOf("/agecheck")&&(document.cookie="birthtime=-1704124799; expires=21-Dec-2025 00:00:00 GMT; path=/",c.location.reload()),d.cur.globalHideWalletBalance){var b=c.$J("#header_wallet_balance")[0];b&&(b.title=b.innerHTML,b.innerHTML="["+a("balance")+"]")}if(d.cur.storeShowCartBtn){var b=c.$J("#store_header_cart_btn");b.length&&b.css("display","block")}var f=document.getElementById("global_action_menu");if(f){var g=!1;(g=document.cookie.match(/steamCountry=(\w{2})/i))&&(g=g[1]);var h="					<style>#cc_menu_btn{display:none;min-width:59px;z-index:999}#cc_list .popup_menu_item{white-space:nowrap}</style>					<span class=\"pulldown\" id=\"cc_menu_btn\" onclick=\"ShowMenu(this, 'cc_menu', 'left', 'bottom', true);\">CC"+(g?': <img src="//steamcommunity-a.akamaihd.net/public/images/countryflags/'+g.toLowerCase()+'.gif" /> '+g:"")+' </span>			<div class="popup_block_new" id="cc_menu" style="display:none;">			<div class="popup_body popup_menu shadow_content" id="cc_list"></div></div>';f.insertAdjacentHTML("afterBegin",h),_cc.updHTMLccList(g)}d.cur.storeShowCCbtn&&c.$J("#cc_menu_btn").show();var i=String(c.location.href).match(/\/(sub|app)\/(\d+)/i);if(i){var j=i[1],k=i[2],l=document.querySelectorAll(".game_area_purchase_game");if(d.cur.storeShowSubid||d.cur.storeShowBtnGetPrices){for(var m,b,n,o=[],p=0;p<l.length;p++)b=l[p].querySelector('input[name="subid"]'),b&&(m=b.value,b=b.parentElement.parentElement,d.cur.storeShowSubid&&b.insertAdjacentHTML("beforeEnd",'<div>Subscription id = <a href="http://steamdb.info/sub/'+m+'">'+m+"</a></div>"),d.cur.storeShowBtnGetPrices&&(n=c.$J("<div><a onclick=\"getPrices(event, '"+j+"', "+k+');return false" href="#getPrices">'+a("getPrices")+"</a></div>"),b=c.$J(b).append(n),o.push({subid:m,el:n[0]})));d.cur.storeShowBtnGetPrices&&(c.getPrices=function(b,d,e){function f(a){var b="http://store.steampowered.com/api/";b+="app"==d?"appdetails/?filters=basic,price_overview,packages&v=1&appids=":"packagedetails/?filters=basic,price_overview,packages&v=1&packageids=",b+=e+"&cc="+a;var f=function(b){var c="";if(b[e].success){var b=b[e].data,d=b.price_overview||b.price;d.discount_percent>0&&(c+="<s>"+d.initial/100+'</s> <span class="discount_pct">-'+d.discount_percent+"%</span> "),c+="<b>"+d["final"]/100+"</b> "+d.currency,b.packages&&(c+=' (subID:<a href="http://steamdb.info/sub/'+b.packages[0]+'">'+b.packages[0]+"</a>)");try{var f=b.package_groups[0].subs;if(f.length>1)for(var g=1;g<f.length;g++){var h=f[g].option_text.match(/- \D*(\d+(?:[.,]\d{2})?)/i);document.querySelector(".swt_price_"+g+"_"+a+">span").innerHTML="<b>"+h[h.length-1]+"</b> "+d.currency+' (subID:<a href="http://steamdb.info/sub/'+f[g].packageid+'">'+f[g].packageid+"</a>)"}}catch(i){}}else c+="N/A";document.querySelector(".swt_price_0_"+a+">span").innerHTML=c};try{var g=window.GM_xmlhttpRequest||window.GM_xhr;console.log(g),g?g({url:b,method:"GET",anonymous:!0,onload:function(a){a=JSON.parse(a.responseText),f(a)}}):c.$J.ajax({url:b,method:"GET"}).done(f)}catch(h){console.log(h)}}for(var g=0;g<o.length;g++){for(var h=a("prices")+":",i=0;i<_cc.ListA.length;i++)h+='<div class="swt_price_'+g+"_"+_cc.ListA[i]+'"><a href="?cc='+_cc.ListA[i]+'"><img src="//steamcommunity-a.akamaihd.net/public/images/countryflags/'+_cc.ListA[i]+'.gif" style="width:16px"/> '+_cc.ListA[i].toUpperCase()+"</a> <span>...</span></div>";o[g].el.innerHTML=h}for(var i=0;i<_cc.ListA.length;i++)f(_cc.ListA[i]);return!1})}var q=document.querySelector(".game_title_area .pageheader")||document.querySelector(".game_title_area .apphub_AppName"),r=encodeURIComponent(q.textContent.trim()),b=document.querySelector(".rightcol.game_meta_data");links=[{href:"http://steamdb.info/"+j+"/"+k+"/",icon:"https://steamdb.info/static/logos/favicon-16x16.png",text:a("viewin")+" SteamDB.info"},{href:"http://www.steamprices.com/"+_cc.curCC.toLowerCase()+"/"+j+"/"+k,icon:"https://www.steamprices.com/assets/images/favicons/favicon-16x16.png?v=a",text:a("viewin")+" SteamPrices.com"},{href:"http://plati.com/asp/find.asp?ai=111350&searchstr="+r,icon:"http://plati.com/favicon.ico",text:a("searchin")+" Plati.com"},{href:"http://steampub.ru/search/"+r,icon:"http://steampub.ru/favicon.ico",text:a("searchin")+" SteamPub.ru"},{href:"http://www.steamgifts.com/giveaways/search?q="+r,icon:"http://www.steamgifts.com/favicon.ico",text:a("searchin")+" SteamGifts.com"},{href:"https://steambroker.com/tradeoffers.php?appid=753&refid=42362508&query="+r,icon:"https://steambroker.com/favicon.ico",text:a("searchin")+" SteamBroker.com"}],"app"==j&&links.push({href:"http://steamcommunity.com/my/gamecards/"+k,icon:"http://store.akamai.steamstatic.com/public/images/v6/ico/ico_cards.png",text:a("viewMyCardsGame")}),b.insertAdjacentHTML("afterBegin",e("Steam Web Tools",links));var s=c.addToCart;c.addToCart=function(b){var e=c.$J('[name="add_to_cart_'+b+'"]'),f=e.parent(),g=c.localStorage.swtcarthistory&&JSON.parse(c.localStorage.swtcarthistory)||[];return g.length>=20&&g.shift(),g.push({subid:b,name:f.find("h1").text().match(/\S+\s(.+)/i)[1],price:f.find(".game_purchase_price.price").text().trim()||f.find(".discount_final_price").text().trim(),link:j+"/"+k}),c.localStorage.swtcarthistory=JSON.stringify(g),d.cur.storeCartAjax?(f.find(".game_purchase_action_bg .btn_addtocart:last>a").after('<a id="swtcartdone" href="#">'+a("adding")+"</a>"),void c.$J.ajax({url:e.attr("action"),type:"POST",data:{subid:b,action:"add_to_cart",sessionid:c.g_sessionID}}).done(function(b){f.find("#swtcartdone").css("background-image","none").text("✔ "+a("added")).attr("href","/cart/")})):s.apply(this,arguments)}}else c.$J('a.btn_small_tall[href^="http://store.steampowered.com/search/?specials=1"]').after('<a class="btnv6_blue_hoverfade btn_small_tall" href="http://steamdb.info/sales/"><span>'+a("allSpecials")+" - SteamDB.Info</span></a>")}function e(a,b){for(var c,d='<div class="block">			<div class="block_header"><h4>'+a+'</h4></div>			<div class="block_content"><div class="block_content_inner">',e=0;e<b.length;e++)c=b[e],d+='<div class="game_area_details_specs"><div class="icon"><a href="'+c.href+'"><img style="height:16px" src="'+c.icon+'"></a></div><a class="name" href="'+c.href+'">'+c.text+"</a></div>";return d+="</div></div></div>"}_cc={curCC:!1,updHTMLccList:function(a){var b="";_cc.ListA=d.cur.storeCCList.split(" ");for(var c=0;c<_cc.ListA.length;c++)b+='<a class="popup_menu_item" href="'+_cc.url+_cc.ListA[c]+'"><img src="//steamcommunity-a.akamaihd.net/public/images/countryflags/'+_cc.ListA[c]+'.gif" style="width:16px"/> '+_cc.ListA[c].toUpperCase()+"</a>";document.getElementById("cc_list").innerHTML=b,_cc.curCC=a||_cc.ListA[0]},url:String(c.location)},-1==_cc.url.indexOf("?")?_cc.url+="?":_cc.url=_cc.url.replace(/\?.+/,"?"),_cc.url+="cc=",c._cc=_cc,b()}},{match:[i+"id/[^/]+/?",i+"profiles/\\d+/?"],run:function(){function b(b){document.querySelector(b).insertAdjacentHTML("afterBegin",'<div id="swt_badges"><a id="csmbadge" class="badge" href="http://checkrep.ru/#steam:'+e+'">CRep: <span></sapn></a> <a id="srbadge" class="badge" href="http://steamrep.com/profiles/'+e+'">SR: <span></sapn></a></div>');var c={0:{text:"rep.unk",color:"606060"},1:{text:"rep.mdlman",color:"5E931B"},2:{text:"rep.white",color:"247E9E"},3:{text:"rep.black",color:"9E2424"},4:{text:"rep.orange",color:"B47200"},error:{text:"Error",color:"606060"}},d=function(b){b.csm>=0||(b.csm=error),f("#csmbadge")[0].style.background="#"+c[b.csm].color,f("#csmbadge span").text(a(c[b.csm].text));var d;b.srcom?d=b.srcom.indexOf("SCAMMER")>-1?c[3].color:b.srcom.indexOf("CAUTION")>-1?c[4].color:b.srcom.indexOf("MIDDLEMAN")>-1?c[1].color:b.srcom.indexOf("TRUSTED SELLER")>-1||b.srcom.indexOf("ADMIN")>-1?c[2].color:c[0].color:(b.srcom=a(c[0].text),d=c[0].color),f("#srbadge")[0].style.background="#"+d,f("#srbadge span").text(b.srcom),f("#swt_badges").show()};try{var g=window.GM_xmlhttpRequest||window.GM_xhr;g({method:"GET",url:"http://checkrep.ru/api/swt9Hk02yFhf/0/repforext2/"+e,onload:function(a){d(JSON.parse(a.responseText))}})}catch(h){console.log(h)}}function d(){e=c.g_rgProfileData.steamid;var d=[{href:"http://checkrep.ru/#steam:"+e,icon:"http://checkrep.ru/favicon.ico",text:a("checkin")+" CheckRep.ru"},{href:"http://steamrep.com/profiles/"+e,icon:"http://steamrep.com/favicon.ico",text:a("checkin")+" SteamRep.com"},{hr:!0},{href:"http://forums.steamrep.com/search/search?keywords="+e,icon:"http://steamrep.com/favicon.ico",text:a("searchinforums")+" SteamRep.com"},{href:"http://www.google.com/#q="+e+" inurl:sourceop.com",icon:"http://forums.sourceop.com/favicon.ico",text:a("searchinforums")+" SourceOP.com"},{href:"http://www.steamtrades.com/user/id/"+e,icon:"http://www.steamgifts.com/favicon.ico",text:a("profile")+" SteamGifts.com"},{hr:!0},{href:"http://backpack.tf/profiles/"+e,icon:"http://backpack.tf/favicon_440.ico",text:a("inventory")+" Backpack.tf"},{href:"http://tf2b.com/tf2/"+e,icon:"http://tf2b.com/favicon.ico",text:a("inventory")+" TF2B.com"},{href:"http://tf2outpost.com/backpack/"+e,icon:"http://cdn.tf2outpost.com/img/favicon-440.ico",text:a("inventory")+" TF2OutPost.com"},{hr:!0},{href:"http://tf2outpost.com/user/"+e,icon:"http://cdn.tf2outpost.com/img/favicon-440.ico",text:a("trades")+" TF2OutPost.com"},{href:"http://dota2lounge.com/profile?id="+e,icon:"http://dota2lounge.com/favicon.ico",text:a("trades")+" Dota2Lounge.com"},{href:"http://csgolounge.com/profile?id="+e,icon:"http://csgolounge.com/favicon.ico",text:a("trades")+" CSGOLounge.com"},{href:"http://steam.tools/itemvalue/#/"+e+"-730",icon:"http://steam.tools/favicon.ico",text:a("inventory")+" Steam.tools/itemvalue/"},{hr:!0},{href:"http://steammoney.com/trade/user/"+e,icon:"http://steammoney.com/favicon.ico",text:a("profile")+" SteamMoney.com"},{id:"inv_spub",href:"http://steampub.ru/user/"+e,icon:"http://steampub.ru/favicon.ico",text:a("profile")+" SteamPub.ru"},{hr:!0}];document.body.insertAdjacentHTML("afterBegin","<style>#swt_badges{display:none;position:absolute;top:7px}.badge{border-radius:3px;box-shadow:1px 1px 0px 0px #1D1D1D;font-size:.7em;padding:3px}#swt_info{position:absolute;top:201px}</style>"),f(".profile_header").append('<div id="swt_info">SteamID64: <a href="http://steamcommunity.com/profiles/'+e+'">'+e+'</a> | <a href="#getMoreInfo" onclick="getMoreInfo();return false">'+a("getMoreInfo")+"</a></div>"),b(".profile_header"),c.getMoreInfo=function(){var b=c.ShowDialog(a("extInfo"),f('<div id="swtexinfo"><img src="http://cdn.steamcommunity.com/public/images/login/throbber.gif"></div>'));c.setTimeout(function(){b.AdjustSizing()},1),f.ajax({url:c.location.href+"?xml=1",context:document.body,dataType:"xml"}).done(function(a,d,g){var h=f(g.responseXML),i=h.find("isLimitedAccount").text(),j=h.find("tradeBanState").text(),k=h.find("vacBanned").text(),l=h.find("memberSince").text(),m=parseInt(e.substr(-10),10),n=m%2,o=m-7960265728;m="STEAM_0:"+n+":"+(o-n)/2,f("#swtexinfo").html("<table><tr><td><b>CommunityID</b></td><td>"+e+"</td><tr><td><b>SteamID</b></td><td>"+m+"</td><tr><td><b>AccountID</b></td><td>"+o+"</td><tr><td><b>Registration date</b></td><td>"+l+"</td><tr><td><b>VAC</b></td><td>"+("0"==k?"Clear":"Banned")+"</td><tr><td><b>Trade Ban</b></td><td>"+j+"</td><tr><td><b>Is Limited Account</b></td><td>"+("0"==i?"No":"Yes")+"</td></table>"),c.setTimeout(function(){b.AdjustSizing()},1)}).fail(function(){f("#swtexinfo").html(a("reqErr"))})};try{var g=f('.profile_header_actions>a.btn_profile_action[href^="javascript:LaunchWebChat"]')[0];g.outerHTML='<span class="btn_profile_action btn_medium"><span><a href="steam://friends/message/'+e+'">'+a("chat")+': Steam</a> | <a href="'+g.href+'">Web</a></span></span>'}catch(h){}var i=document.querySelector('.profile_count_link a[href$="inventory/"]');i&&i.insertAdjacentHTML("afterEnd",': <span class="linkActionSubtle"><a title="Steam Gifts" href="'+i.href+'#753_1"><img src="http://www.iconsearch.ru/uploads/icons/basicset/16x16/present_16.png"/></a> <a title="Steam Cards" href="'+i.href+'#753_6"><img width="26" height="16" src="http://store.akamai.steamstatic.com/public/images/ico/ico_cards.png"/></a> <a title="TF2" href="'+i.href+'#440"><img src="http://media.steampowered.com/apps/tf2/blog/images/favicon.ico"/></a> <a title="Dota 2" href="'+i.href+'#570"><img src="http://www.dota2.com/images/favicon.ico"/></a> <a title="CSGO" href="'+i.href+'#730"><img src="http://blog.counter-strike.net/wp-content/themes/counterstrike_launch/favicon.ico"/></a></span>');for(var j,k="",l=0;l<d.length;l++)j=d[l],k+=j.hr?"<hr/>":'<a class="popup_menu_item" href="'+j.href+'"><img style="width:18px;height:18px" src="'+j.icon+'"> '+j.text+"</a>";try{document.querySelector("#profile_action_dropdown>.popup_body.popup_menu").insertAdjacentHTML("afterBegin",k)}catch(m){f(".profile_header_actions").append("<span class=\"btn_profile_action btn_medium\" onclick=\"ShowMenu(this,'profile_action_dropdown','right')\"><span>"+a("more")+' <img src="http://cdn.steamcommunity.com/public/images/profile/profile_action_dropdown.png"/></span></span><div class="popup_block" id="profile_action_dropdown" style="visibility:visible;display:none"><div class="popup_body popup_menu">'+k+"</div></div>")}}var e,f=c.$J;c.g_rgProfileData&&d()}},{match:[i+"id/.+?/inventory.*",i+"profiles/\\d+/inventory.*"],run:function(){function b(){var b={descriptions:[]};if(c.getSubid=function(a,d){b.element=a;var e=c.UserYou.rgContexts[753][1].inventory.rgInventory[d];b.classid=e.classid,b.giftId=d,b.giftName=encodeURIComponent(e.name),new c.Ajax.Request("http://steamcommunity.com/gifts/"+b.giftId+"/validateunpack",{method:"post",parameters:{sessionid:c.g_sessionID},onSuccess:function(a){c.setSubID(a.responseJSON.packageid)}})},c.setSubID=function(a){var c='SubscriptionID = <a href="http://steamdb.info/sub/'+a+'">'+a+"</a>";b.element.outerHTML=c;var d=b.descriptions[b.classid];d[d.length-1]={value:c},d.withSubid=!0},document.body.insertAdjacentHTML("afterBegin","<style>.checkedForSend{background:#366836!important}.itemcount{background:#292929;color:#FFF;font-weight:700;position:absolute;right:0;bottom:0}.swt_icon{position:absolute;top:0;left:0}.swt_icon-st{background:#CF6A32;color:#fff}.swt_icon-t{background:#FDEC14;color:#000}#inventory_logos{display:none}.swt_hidden{display:none}</style>"),c.checkedForSend={},c.checkForSend=function(b){var d=c.g_ActiveInventory.selectedItem;if(d.checkedForSend)if(d.checkedForSend=!1,d.element.removeClassName("checkedForSend"),d._amount>1)for(var e=0;e<d._amount;e++)delete c.checkedForSend[d._ids[e]];else delete c.checkedForSend[b];else{var f=1;if(d._amount>1&&(f=parseInt(prompt(a("howmany")+d._amount,d._amount))||1,f>d._amount&&(f=d._amount)),f>1)if(confirm(a("Skip sent?")))for(var e=0;f>e;e++){var g=d._subItems[e],h=!1;if(g.owner_descriptions)for(var i=0;i<g.owner_descriptions.length;i++)if(g.owner_descriptions[i].value.match(/<persona>|\S+@\S+/i)){h=!0;break}h||(c.checkedForSend[d._subItems[e].id]=d.name,d._subItems[e].element.addClassName("checkedForSend"))}else for(var e=0;f>e;e++)c.checkedForSend[d._ids[e]]=d.name,d._subItems[e].element.addClassName("checkedForSend");else c.checkedForSend[b]=d.name;d.checkedForSend=!0,d.element.addClassName("checkedForSend")}},c.sendChecked=function(){var a="http://store.steampowered.com/checkout/sendgift/";for(var b in c.checkedForSend)break;a+=b+"#multisend="+encodeURIComponent(JSON.stringify(c.checkedForSend)),c.location.href=a},c.g_bViewingOwnProfile){var e=c.localStorage.giftsNotes;e=e?JSON.parse(e):{},c.loadGiftNote=function(){var b=c.g_ActiveInventory.selectedItem.id;d("#iteminfo"+c.iActiveSelectView+"_item_tags_content textarea.giftnote").length||d("#iteminfo"+c.iActiveSelectView+"_item_tags_content").append('<br/><textarea class="giftnote" style="width:100%">'+(e[b]||"")+"</textarea><button onclick=\"saveGiftNote('"+b+"')\">"+a("save")+"</button>")},c.saveGiftNote=function(a){e[a]=d("#iteminfo"+c.iActiveSelectView+"_content textarea.giftnote").val(),c.localStorage.giftsNotes=JSON.stringify(e)};var f=d("div.pending_gift:first");f.length&&(f.before('<a id="swt_acceptAllGifts" class="btn_darkblue_white_innerfade btn_medium new_trade_offer_btn" href="#"><span>'+a("acceptAllToInv")+"</span></a>"),d("#swt_acceptAllGifts").click(function(a){a.preventDefault();var b=d("div.pending_gift");if(b.length){var c;b=b.find('>div[id^="pending_gift_"]');for(var e=0;e<b.length;e++)c=b[e].id.split("_")[2],DoAcceptGift(c,!1)}}))}var g=c.BuildHover;if(c.BuildHover=function(){var d=arguments[1];return c.g_ActiveInventory&&753==c.g_ActiveInventory.appid&&(1!=d.contextid||d.descriptions.withClassid||(d.descriptions.withClassid=!0,d.descriptions||(d.descriptions=[]),d.descriptions.push({
value:"ClassID = "+d.classid}),c.g_bViewingOwnProfile&&d.descriptions.push({value:'<a href="#" onclick="getSubid(event.target,\''+d.id+"');return false\">"+a("get")+" SubscriptionID</a>",type:"html"}),b.descriptions[d.classid]||(b.descriptions[d.classid]=d.descriptions),d.owner_actions&&(d.owner_actions.push({link:'javascript:checkForSend("%assetid%")',name:a("checkForSend")}),d.owner_actions.push({link:"javascript:sendChecked()",name:a("sendChecked")}),d.owner_actions.push({link:"javascript:loadGiftNote()",name:a("showNote")})))),g.apply(this,arguments)},!c.g_bViewingOwnProfile){var h=c.PopulateMarketActions;c.PopulateMarketActions=function(b,e){var f=h.apply(this,arguments);if(!e.marketable)return f;var g=e.market_hash_name?e.market_hash_name:e.market_name;return b.appendChild(c.CreateMarketActionButton("blue","http://steamcommunity.com/market/listings/"+e.appid+"/"+g,a("minMarketPrice")+': <span id="swt_lowestItemPrice_'+e.classid+'">?</span>')),d(b).css("display","block"),d.ajax({url:"http://steamcommunity.com/market/priceoverview/",type:"GET",data:{country:c.g_strCountryCode,currency:"undefined"!=typeof c.g_rgWalletInfo?c.g_rgWalletInfo.wallet_currency:1,appid:e.appid,market_hash_name:g}}).done(function(b){var c=a("reqErr");b.success&&(c=b.lowest_price),d("#swt_lowestItemPrice_"+e.classid).html(c)}).fail(function(b){d("#swt_lowestItemPrice_"+e.classid).text(a("reqErr"))}),f}}c.Filter.UpdateTagFiltering_old=c.Filter.UpdateTagFiltering,c.Filter.UpdateTagFiltering=function(a){return c.localStorage.hideDupItems&&(a.SWT=["notdup"]),this.UpdateTagFiltering_old.apply(this,[a])};var i=c.SelectInventoryFromUser;c.SelectInventoryFromUser=function(a,b,e,f){if(!f)return i.apply(this,arguments);var g=c.UserYou.getInventory(b,e);if(g.SetActivePage_old||(g.SetActivePage_old=g.SetActivePage,g.SetActivePage=function(a){return this.BIsPendingInventory()?void(this.pageCurrent=a):void(a>=this.pageTotal||(this.pageList[this.pageCurrent].hide(),this.pageList[a].show(),this.pageCurrent=a,this.UpdatePageCounts(),this.PreloadPageImages(this.pageCurrent)))}),g.BuildItemElement_old||(g.BuildItemElement_old=g.BuildItemElement,g.BuildItemElement=function(){for(var a=g.BuildItemElement_old.apply(this,arguments),b=this.BuildItemElement.fncs,c=0;c<b.length;c++)b[c].apply(this,[a]);return a},g.BuildItemElement.fncs=[]),730==b&&(g.BuildItemElement.fncs.csgoItemColor||(g.BuildItemElement.fncs.csgoItemColor=!0,g.BuildItemElement.fncs.push(function(a){for(var b='<div class="swt_icon">',c=a.rgItem.tags,d=0;d<c.length;d++)switch(c[d].category){case"Quality":switch(c[d].internal_name){case"strange":b+='<span class="swt_icon-st">ST</span>';break;case"unusual":a.style.borderColor="#"+c[d].color,c.colored=!0;break;case"tournament":b+='<span class="swt_icon-t">S</span>'}break;case"Rarity":c.colored||(a.style.borderColor="#"+c[d].color)}a.innerHTML+=b+"</div>"}))),!g._hiddenDup){g.BuildItemElement.fncs.itemcount||(g.BuildItemElement.fncs.itemcount=!0,g.BuildItemElement.fncs.push(function(a){a.rgItem._dup&&d(a).addClass("swt_itemdup");var b=a.rgItem._amount;b&&(a.innerHTML+='<div class="itemcount">x'+b+"</div>")})),g.MakeActive_old=g.MakeActive,g.MakeActive=function(){var a=g.MakeActive_old.apply(this,arguments);return k(),a};var h,j=[];if(h=g.rgChildInventories)for(var l in h)h[l].BuildItemElement=g.BuildItemElement,h[l].MakeActive=g.MakeActive,j.push(h[l].rgInventory);else g.rgInventory&&j.push(g.rgInventory);if(j.length){g._hiddenDup=!0;for(var m,n,o=0;o<j.length;o++){m=j[o],n=[];var p,q;for(var r in m)p=m[r],p._is_stackable||p.is_stackable||((q=n[p.classid])?(q._amount+=1,q._ids.push(p.id),q._subItems.push(p)):(p._is_stackable=!0,p._amount=1,p._ids=[p.id],p._subItems=[p],p.tags.push({category:"SWT",category_name:"SteamWebTools",internal_name:"notdup",name:"HideDup"}),n[p.classid]=p))}}}return i.apply(this,arguments)};var j='<input type="checkbox" name="hidedup" onchange="window.onchangehidedup(event)" '+(c.localStorage.hideDupItems?'checked="true"':"")+"/>"+a("hideDup");document.getElementById("inventory_pagecontrols").insertAdjacentHTML("beforeBegin",j);var k=function(){c.localStorage.hideDupItems?(c.Filter.rgCurrentTags.SWT=["notdup"],c.Filter.OnFilterChange(),d(".itemcount").show()):(delete c.Filter.rgCurrentTags.SWT,c.Filter.rgLastTags.SWT=["notdup"],c.Filter.OnFilterChange(),d(".itemcount").hide()),g_ActiveInventory.selectedItem&&g_ActiveInventory.EnsurePageActiveForItem(g_ActiveInventory.selectedItem.element)};c.onchangehidedup=function(a){a.target.checked?c.localStorage.hideDupItems=1:c.localStorage.removeItem("hideDupItems"),k()},d("#market_sell_dialog_accept_ssa").attr("checked",!0),c.SellItemDialog.OnConfirmationAccept_old=c.SellItemDialog.OnConfirmationAccept;var l=c.SellCurrentSelection;c.SellCurrentSelection=function(){var b=l.apply(this,arguments),e=c.g_ActiveInventory.selectedItem._amount;if(c.$("market_sell_dialog_ok").stopObserving(),d("#market_sell_dialog_ok").unbind(),e>1){var f=parseInt(prompt(a("howmany")+e,e))||1;f>e&&(f=e),f>1?(c.SellItemDialog._amount=f,c.SellItemDialog._itemNum=0,c.SellItemDialog._itemsFailNum=0,c.SellItemDialog.OnConfirmationAccept_new=function(b){c.$("market_sell_dialog_error").hide(),c.$("market_sell_dialog_ok").fade({duration:.25}),c.$("market_sell_dialog_back").fade({duration:.25}),c.$("market_sell_dialog_throbber").show(),c.$("market_sell_dialog_throbber").fade({duration:.25,from:0,to:1});var e;do e=c.SellItemDialog.m_item._subItems[c.SellItemDialog._itemNum],c.SellItemDialog._itemNum++;while(!e.marketable);c.SellItemDialog.m_item.id=e.id,d.ajax({url:"https://steamcommunity.com/market/sellitem/",type:"POST",data:{sessionid:c.g_sessionID,appid:c.SellItemDialog.m_item.appid,contextid:c.SellItemDialog.m_item.contextid,assetid:c.SellItemDialog.m_item.id,amount:c.SellItemDialog.m_nConfirmedQuantity,price:c.SellItemDialog.m_nConfirmedPrice},crossDomain:!0,xhrFields:{withCredentials:!0}}).done(function(b){return d("#market_sell_dialog_item_availability_hint>.market_dialog_topwarning").text(a("listed")+c.SellItemDialog._itemNum+(c.SellItemDialog._itemsFailNum?" | "+a("skipped")+c.SellItemDialog._itemsFailNum:"")),c.SellItemDialog._itemNum>=c.SellItemDialog._amount?void c.SellItemDialog.OnSuccess.apply(c.SellItemDialog,[{responseJSON:b}]):c.SellItemDialog.OnConfirmationAccept_new.apply(c.SellItemDialog,arguments)}).fail(function(a){var b=d.parseJSON(a.responseText);return c.SellItemDialog._itemsFailNum++,c.SellItemDialog._itemNum>=c.SellItemDialog._amount?void c.SellItemDialog.OnFailure({responseJSON:b}):c.SellItemDialog.OnConfirmationAccept_new.apply(c.SellItemDialog,arguments)})},c.SellItemDialog.OnConfirmationAccept=c.SellItemDialog.OnConfirmationAccept_new):c.SellItemDialog.OnConfirmationAccept=c.SellItemDialog.OnConfirmationAccept_old}else c.SellItemDialog.OnConfirmationAccept=c.SellItemDialog.OnConfirmationAccept_old;return d("#market_sell_dialog_ok").on("click",d.proxy(c.SellItemDialog.OnConfirmationAccept,c.SellItemDialog)),b}}var d=c.$J;c.g_strInventoryLoadURL&&b()}},{match:[i+"id/.+?/gamecards/\\d+.*",i+"profiles/\\d+/gamecards/\\d+.*"],run:function(){var a=c.location.pathname.match(/\/gamecards\/(\d+)/)[1];c.$J(".gamecards_inventorylink").append('<a class="btn_grey_grey btn_small_thin" href="http://www.steamcardexchange.net/index.php?inventorygame-appid-'+a+'"><span>www.SteamCardExchange.net</span></a>')}},{match:[i+"id/.+?/badges.*",i+"profiles/\\d+/badges.*"],run:function(){c.$J(".badge_details_set_favorite").append('<div class="btn_grey_black btn_small_thin" onclick="showWithDrop()"><span>'+a("showDropsCard")+"</span></div>"),c.showWithDrop=function(){return c.$J(".badge_row").filter(function(a,b){return!c.$J("a.btn_green_white_innerfade",b).length}).remove(),!1}}},{match:[i+"app/\\d+/guides.*"],run:function(){c.$J(".workshopItemCollection").wrap(function(){var a=c.$J(this),b=a.attr("onclick").match(/href='(.+)'/)[1];return a.attr("onclick",!1),"<a href='"+b+"'></a>"})}},{match:[i+"market.*"],run:function(){function b(){if(d.cur.globalHideWalletBalance){var b=c.$J("#marketWalletBalanceAmount")[0];b&&(b.title=b.innerHTML,b.innerHTML="["+a("balance")+"]")}var b=c.$J(".pick_and_sell_button").length;b?d.cur.marketMainPageFuncs&&e():document.getElementById("searchResults")?g():document.getElementById("largeiteminfo_item_name")&&f()}function e(){function b(a,b,d){var e=c.$J("#tabContentsMyListings ."+a+" span.market_listing_price");if(e){for(var f=0,g=0;e.length>g;g++)price=100*parseFloat(e[g].innerHTML.match(/(\d+(?:[.,]\d{1,2})?)/)[1].replace(",",".")),d&&(g++,price*=e[g].innerHTML),f+=price;c.$J("#"+b).append(" / "+c.v_currencyformat(f,c.GetCurrencyCode(c.g_rgWalletInfo.wallet_currency))+"("+c.v_currencyformat(f/1.15,c.GetCurrencyCode(c.g_rgWalletInfo.wallet_currency))+")")}}document.body.insertAdjacentHTML("afterBegin","<style>.scrollbl{max-height:500px;overflow-y:scroll;} .lfremove{display:inline-block}</style>");document.querySelector("#tabContentsMyListings .market_home_listing_table:nth-child(1) .market_listing_edit_buttons").innerHTML='<a href="#checkAllListings" id="btnCheckAllListings" class="item_market_action_button item_market_action_button_blue"><span class="item_market_action_button_edge item_market_action_button_left"></span><span class="item_market_action_button_contents">'+a("checkAll")+'</span><span class="item_market_action_button_edge item_market_action_button_right"></span></a> <a href="#removeListings" id="btnRemoveListings" class="item_market_action_button item_market_action_button_green"><span class="item_market_action_button_edge item_market_action_button_left"></span><span class="item_market_action_button_contents">'+a("deleteChecked")+'</span><span class="item_market_action_button_edge item_market_action_button_right"></span></a>';c.$J("#btnCheckAllListings").click(function(){return c.$J(".lfremove").attr("checked",!c.$J(".lfremove:first")[0].checked),!1}),c.$J("#btnRemoveListings").click(function(){function a(d){d<b.length&&new c.Ajax.Request("http://steamcommunity.com/market/removelisting/"+c.$J(b[d]).data("listingid"),{method:"post",parameters:{sessionid:c.g_sessionID},onComplete:function(){a(++d)},onSuccess:function(){b[d].parentElement.parentElement.parentElement.parentElement.remove()}})}var b=[];return c.$J(".lfremove").each(function(a,c){c.checked&&b.push(c)}),b.length&&a(0),!1});var d=c.$J("#tabContentsMyListings .market_home_listing_table:nth-child(1) .market_listing_row").detach();c.$J(".market_content_block.my_listing_section.market_home_listing_table:nth-child(1)").append('<div class="scrollbl tablesell"></div>').click,d.prependTo("#tabContentsMyListings .scrollbl.tablesell");var d=c.$J("#tabContentsMyListings .market_home_listing_table:nth-child(2) .market_listing_row").detach();c.$J(".market_content_block.my_listing_section.market_home_listing_table:nth-child(2)").append('<div class="scrollbl tablebuy"></div>').click,d.prependTo("#tabContentsMyListings .scrollbl.tablebuy"),c.$J(".market_listing_cancel_button a").each(function(a,b){var d=decodeURIComponent(String(b.href)).match(/mylisting', '(\d+)', (\d+), '(\d+)', '(\d+)'/i);d&&(c.$J(b).before('<span class="item_market_action_button_contents"><input type="checkbox" class="lfremove" data-listingid="'+d[1]+'"/></span>'),c.$J(b).remove())}),b("tablesell","my_market_selllistings_number"),b("tablebuy","my_market_buylistings_number",!0)}function f(){c.$J("#market_buynow_dialog_accept_ssa, #market_buyorder_dialog_accept_ssa").prop("checked",!0),g(),c.$J("#searchResultsRows .market_listing_item_name_block").each(function(a,b){$J(b).prepend('<div style="float:right">#'+(a+1)+"</div>")})}function g(){c.$J("#searchResults_btn_next").after(' <input id="swt_gotopagevl" type="text" value="1" size="3"/><span class="pagebtn" id="swt_gotopagebtn">'+a("go")+"</span>"),c.$J("#swt_gotopagebtn").click(function(){c.g_oSearchResults.GoToPage(c.$("swt_gotopagevl").value-1)})}b()}},{match:[i+"groups/SteamClientBeta#swt-settings"],run:function(){var b=c.$J;b("#group_tab_content_overview").show().attr("id","swt_content1"),b("head").append(b('<link href="http://steamcommunity-a.akamaihd.net/public/css/skin_1/groupadmin.css" rel="stylesheet" type="text/css">')),b(".grouppage_logo").css("background-image","none"),b(".grouppage_logo>img")[0].src="http://v1t.su/projects/steam/webtools/imgs/steam-big-icon.png",b(".grouppage_header_label").text("Steam "+a("set.ext")),b(".grouppage_header_name").html('Steam Web Tools <span class="grouppage_header_abbrev" style="font-size:21px">'+a("set.settings")+"</span>"),b(".grouppage_join_area a")[0].href="http://v1t.su/projects/steam/webtools/",b(".grouppage_join_area a span").text(a("set.homePage")),b(".grouppage_friendsingroup").remove(),b(".grouppage_member_tiles").remove(),b(".group_tabs").remove(),b(".rightcol ").remove();var e=function(c){var f="";e.fields=[];var g,h,i,j;for(i=0;i<c.length;i++){for(f+=e.create_groupStart(c[i].group),g=c[i].rows,j=0;j<g.length;j++)h=g[j],e.fields.push(h.name),h.value=d.cur[h.name],f+='<div class="formRow">',f+=e["create_"+h.type](h),f+="</div>";f+=e.create_groupEnd()}b(".maincontent>.leftcol ")[0].innerHTML='<form class="smallForm" id="editForm" name="editForm">'+f+'<div class="group_content_bodytext"><div class="forum_manage_actions"><a href="#swt-settings" class="btn_grey_white_innerfade btn_medium" id="swt_btnDef"><span>'+a("set.def")+'</span></a><button type="submit" class="btn_green_white_innerfade btn_medium"><span>'+a("save")+"</span></button></div></div></form>"};e.create_groupStart=function(a){return'<div class="group_content group_summary"><div class="formRow"><h1>'+a+"</h1></div>"},e.create_groupEnd=function(){return"</div>"},e.create_checkbox=function(a){return'<input type="checkbox"'+(a.value?' checked="checked"':"")+' name="'+a.name+'" id="'+a.name+'"><label for="'+a.name+'">'+a.title+"</label>"},e.create_select=function(a){for(var b='<div class="formRowTitle">'+a.title+'</div><div class="formRowFields"><select name="'+a.name+'" id="'+a.name+'" class="gray_bevel">',c=a.options,d=0;d<c.length;d++)b+='<option value="'+c[d].value+'"'+(c[d].value==a.value?' selected="selected"':"")+">"+c[d].text+"</option>";return b+="</select></div>"},e.create_textLong=function(a){return"<div>"+a.title+'</div><div class="formRowFields"><div class="gray_bevel for_text_input fullwidth"><input type="text" name="'+a.name+'" id="'+a.name+'" value="'+a.value+'"></div></div>'},e([{group:a("set.global"),rows:[{type:"select",title:a("set.lang"),name:"globalLang",options:[{text:"English",value:"en"},{text:"Русский",value:"ru"},{text:"简体中文",value:"zh-cn"},{text:"日本語",value:"jp"}]},{type:"checkbox",title:a("set.FixNavbar"),name:"globalFixNavbar"},{type:"checkbox",title:a("set.hideAccName"),name:"globalHideAccName"},{type:"checkbox",title:a("set.hideBalance"),name:"globalHideWalletBalance"}]},{group:a("set.store"),rows:[{type:"checkbox",title:a("set.showCCBtn"),name:"storeShowCCbtn"},{type:"textLong",title:a("set.CCList"),name:"storeCCList"},{type:"checkbox",title:a("set.showCartBtn"),name:"storeShowCartBtn"},{type:"checkbox",title:a("set.cartAjax"),name:"storeCartAjax"},{type:"checkbox",title:a("set.showSubid"),name:"storeShowSubid"},{type:"checkbox",title:a("set.showBtnGetPrices"),name:"storeShowBtnGetPrices"}]},{group:a("set.market"),rows:[{type:"checkbox",title:a("set.marketMainPageFuncs"),name:"marketMainPageFuncs"}]}]),b("#swt_btnDef").click(function(){d.reset(),d.save(),d.storage.gm?c.location.reload():c.location.href="http://store.steampowered.com/about/#swt-settings-del"}),b("form#editForm").submit(function(a){var f,g,h;for(f=0;f<e.fields.length;f++)g=e.fields[f],h=b("#"+g),d.cur[g]="checkbox"==h.prop("type")?h.prop("checked"):h.val();d.save(),a.preventDefault(),d.storage.gm?c.location.reload():c.location.href="http://store.steampowered.com/about/#swt-settings-save="+encodeURIComponent(JSON.stringify(d.cur))})}},{match:[h+"about/#swt-settings.*"],run:function(){var a=c.location.hash;if(a&&"swt-settings-"==a.substr(1,13))if("save"==a.substr(14,4)){var b=a.substr(19);b=decodeURIComponent(b),d.storage.set(b)}else"del"==a.substr(14,3)&&d.storage.del();c.location.href="http://steamcommunity.com/groups/SteamClientBeta#swt-settings"}}],k=document.URL,l=0;l<j.length;l++)for(var m=0;m<j[l].match.length;m++){var n=new RegExp("^"+j[l].match[m]+"$","i");if(n.test(k)){j[l].run();break}}}();